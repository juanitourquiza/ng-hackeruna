import{a as y,b as S}from"./chunk-F66C7T2K.js";import{b as k,e as P}from"./chunk-SUNVBWSZ.js";import"./chunk-FPAH3HGM.js";import"./chunk-RLACU72E.js";import{Ab as f,Ea as h,Ia as x,Qa as M,Ra as l,S as u,Ua as b,Ya as a,Za as n,_a as d,bb as p,cb as s,db as C,eb as g,jb as I,la as m,ta as c,ua as v,wa as r,yb as w,zb as O}from"./chunk-A377WO76.js";var L=o=>["/post",o];function H(o,t){if(o&1&&(a(0,"article",5)(1,"a",6)(2,"div",7),d(3,"img",8),n(),d(4,"h3",9),a(5,"p",10),s(6),n(),d(7,"div",11),n()()),o&2){let e=t.$implicit,i=p(2);r(),l("routerLink",I(6,L,e.slug)),r(2),l("src",i.getPostImage(e),v)("alt",i.stripHtml(e.title.rendered)),r(),l("innerHTML",e.title.rendered,c),r(2),g(" ",i.formatDate(e.date)," "),r(),l("innerHTML",e.excerpt.rendered,c)}}function R(o,t){if(o&1&&(a(0,"section",1)(1,"h2",2),s(2," Art\xEDculos Relacionados "),n(),a(3,"div",3),x(4,H,8,8,"article",4),n()()),o&2){let e=p();r(4),l("ngForOf",e.relatedPosts())("ngForTrackBy",e.trackByPostId)}}var _=class o{currentPostId;categoryId;wpApi=u(y);relatedPosts=m([]);ngOnInit(){this.loadRelatedPosts()}loadRelatedPosts(){this.categoryId?this.wpApi.getPostsByCategory(this.categoryId,1,6).subscribe({next:t=>{let e=t.data.filter(i=>i.id!==this.currentPostId);this.relatedPosts.set(e.slice(0,3))},error:t=>{console.error("Error loading related posts:",t),this.loadRecentPosts()}}):this.loadRecentPosts()}loadRecentPosts(){this.wpApi.getPosts(1,6).subscribe({next:t=>{let e=t.data.filter(i=>i.id!==this.currentPostId);this.relatedPosts.set(e.slice(0,3))},error:t=>{console.error("Error loading recent posts:",t)}})}getPostImage(t){return t._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"https://backend.hackeruna.com/wp-content/themes/magazinebook/img/default-bg-img.png"}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}stripHtml(t){let e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}trackByPostId(t,e){return e.id}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-related-posts"]],inputs:{currentPostId:"currentPostId",categoryId:"categoryId"},decls:1,vars:1,consts:[["class","mt-16 pt-12","style","border-top: 1px solid var(--border-color);",4,"ngIf"],[1,"mt-16","pt-12",2,"border-top","1px solid var(--border-color)"],[1,"text-2xl","font-bold","mb-8",2,"color","var(--text-primary)"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],["class","group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group"],[3,"routerLink"],[1,"mb-4","overflow-hidden","rounded-lg"],["loading","lazy",1,"w-full","h-48","object-cover","transition-transform","duration-300","group-hover:scale-110",3,"src","alt"],[1,"text-lg","font-semibold","leading-snug","mb-2","group-hover:underline",2,"color","var(--text-primary)",3,"innerHTML"],[1,"text-sm","mb-2",2,"color","var(--text-tertiary)"],[1,"text-sm","line-clamp-2",2,"color","var(--text-secondary)",3,"innerHTML"]],template:function(e,i){e&1&&x(0,R,5,2,"section",0),e&2&&l("ngIf",i.relatedPosts().length>0)},dependencies:[f,w,O,P],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}"],changeDetection:0})};function z(o,t){o&1&&d(0,"app-loading-spinner")}function N(o,t){if(o&1&&(a(0,"div",2),s(1),a(2,"div",5)(3,"a",6),s(4," Volver al inicio "),n()()()),o&2){let e=p();r(),g(" ",e.error()," ")}}function W(o,t){if(o&1&&(a(0,"article",3)(1,"nav",7)(2,"a",8),s(3," Inicio "),n(),a(4,"span",9),s(5,"/"),n(),a(6,"span",10),s(7),n()(),a(8,"div",11)(9,"span",12),s(10),n()(),d(11,"h1",13),a(12,"div",14)(13,"span",15),s(14,"person"),n(),a(15,"span",16),s(16),n(),a(17,"span",15),s(18,"calendar_today"),n(),a(19,"time"),s(20),n()(),a(21,"div",17),d(22,"img",18),n(),d(23,"div",19),a(24,"div",20)(25,"a",21)(26,"span",22),s(27,"arrow_back"),n(),s(28," Volver al inicio "),n()()()),o&2){let e=p();r(7),C(e.categoryName),r(3),g(" ",e.categoryName," "),r(),l("innerHTML",e.post().title.rendered,c),r(5),g("Por ",e.authorName,""),r(3),M("datetime",e.post().date),r(),C(e.formatDate(e.post().date)),r(2),l("src",e.featuredImage,v)("alt",e.post().title.rendered),r(),l("innerHTML",e.post().content.rendered,c)}}function A(o,t){if(o&1&&d(0,"app-related-posts",4),o&2){let e,i=p();l("currentPostId",i.post().id)("categoryId",(e=i.post())==null||e._embedded==null||e._embedded["wp:term"]==null||e._embedded["wp:term"][0]==null||e._embedded["wp:term"][0][0]==null?null:e._embedded["wp:term"][0][0].id)}}var E=class o{route=u(k);wpApi=u(y);post=m(null);loading=m(!0);error=m(null);ngOnInit(){this.route.params.subscribe(t=>{let e=t.slug;e&&this.loadPost(e)})}loadPost(t){this.loading.set(!0),this.error.set(null),this.wpApi.getPostBySlug(t).subscribe({next:e=>{this.post.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading post:",e),this.error.set("No se pudo cargar el art\xEDculo"),this.loading.set(!1)}})}get featuredImage(){return this.post()?._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"https://backend.hackeruna.com/wp-content/themes/magazinebook/img/default-bg-img.png"}get authorName(){return this.post()?._embedded?.author?.[0]?.name||"Anonymous"}get categoryName(){return this.post()?._embedded?.["wp:term"]?.[0]?.[0]?.name||"Uncategorized"}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-post-detail"]],decls:6,vars:4,consts:[[1,"py-12"],[1,"max-w-5xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-red-100","dark:bg-red-900","border","border-red-400","dark:border-red-700","text-red-700","dark:text-red-200","px-4","py-3","rounded","mb-8"],[1,"prose","prose-lg","max-w-none"],[3,"currentPostId","categoryId"],[1,"mt-4"],["routerLink","/",1,"text-primary","hover:underline"],[1,"mb-8","text-sm"],["routerLink","/",1,"no-underline","hover:underline","transition-all",2,"color","var(--text-secondary)"],[1,"mx-2",2,"color","var(--text-tertiary)"],[2,"color","var(--text-tertiary)"],[1,"mb-6"],[1,"text-xs","font-mono","uppercase","tracking-wider","text-white","py-1.5","px-4","inline-block",2,"background-color","var(--accent-blue)"],[1,"text-4xl","md:text-5xl","font-bold","leading-tight","mb-6",2,"color","var(--text-primary)",3,"innerHTML"],[1,"flex","items-center","mb-10","text-sm","not-prose",2,"color","var(--text-tertiary)"],[1,"material-symbols-outlined","text-base","mr-2"],[1,"mr-4"],[1,"mb-10","-mx-4","sm:-mx-6","lg:-mx-8"],["loading","lazy",1,"w-full","h-auto","object-cover",3,"src","alt"],[1,"text-lg","leading-relaxed",2,"color","var(--text-primary)",3,"innerHTML"],[1,"mt-12","pt-8","not-prose",2,"border-top","1px solid var(--border-color)"],["routerLink","/",1,"inline-flex","items-center","font-semibold","hover:underline","transition-all",2,"color","var(--accent-blue)"],[1,"material-symbols-outlined","mr-2"]],template:function(e,i){e&1&&(a(0,"main",0)(1,"div",1),x(2,z,1,0,"app-loading-spinner")(3,N,5,1,"div",2)(4,W,29,9,"article",3)(5,A,1,2,"app-related-posts",4),n()()),e&2&&(r(2),b(i.loading()?2:-1),r(),b(i.error()?3:-1),r(),b(i.post()&&!i.loading()?4:-1),r(),b(i.post()&&!i.loading()?5:-1))},dependencies:[f,P,S,_],styles:["[_nghost-%COMP%]     .prose{color:var(--text-primary)}[_nghost-%COMP%]     .prose h1, [_nghost-%COMP%]     .prose h2, [_nghost-%COMP%]     .prose h3, [_nghost-%COMP%]     .prose h4, [_nghost-%COMP%]     .prose h5, [_nghost-%COMP%]     .prose h6{color:var(--text-primary);font-weight:700;margin-top:2rem;margin-bottom:1rem}[_nghost-%COMP%]     .prose p{color:var(--text-primary);margin-bottom:1.5rem;line-height:1.75}[_nghost-%COMP%]     .prose a{color:var(--accent-blue);text-decoration:underline}[_nghost-%COMP%]     .prose a:hover{opacity:.8}[_nghost-%COMP%]     .prose strong, [_nghost-%COMP%]     .prose b{color:var(--text-primary);font-weight:600}[_nghost-%COMP%]     .prose code{background-color:var(--bg-tertiary);color:var(--text-primary);padding:.2rem .4rem;border-radius:.25rem;font-size:.9em}[_nghost-%COMP%]     .prose pre{background-color:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:.5rem;padding:1rem;overflow-x:auto}[_nghost-%COMP%]     .prose pre code{background:none;padding:0}[_nghost-%COMP%]     .prose blockquote{border-left:4px solid var(--accent-blue);background-color:var(--bg-secondary);padding:1rem 1.5rem;margin:1.5rem 0;font-style:italic;color:var(--text-secondary)}[_nghost-%COMP%]     .prose ul, [_nghost-%COMP%]     .prose ol{color:var(--text-primary);margin-bottom:1.5rem;padding-left:1.5rem}[_nghost-%COMP%]     .prose li{margin-bottom:.5rem}[_nghost-%COMP%]     .prose img{border-radius:.5rem;width:100%;height:auto}[_nghost-%COMP%]     .prose hr{border-color:var(--border-color);margin:2rem 0}[_nghost-%COMP%]     .prose table{width:100%;border-collapse:collapse;margin:1.5rem 0}[_nghost-%COMP%]     .prose table th, [_nghost-%COMP%]     .prose table td{border:1px solid var(--border-color);padding:.75rem;text-align:left}[_nghost-%COMP%]     .prose table th{background-color:var(--bg-secondary);font-weight:600;color:var(--text-primary)}[_nghost-%COMP%]     .prose table td{color:var(--text-primary)}"]})};export{E as PostDetailComponent};
