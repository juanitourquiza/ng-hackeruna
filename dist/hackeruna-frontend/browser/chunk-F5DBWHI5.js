import{j as p,m as d}from"./chunk-T33PNWSJ.js";import{l as n}from"./chunk-7WVRIIHY.js";import{L as o,Lb as r,Q as i,fa as u,qa as l,v as s}from"./chunk-7HMXUCHC.js";var c=class g{platformId=i(l);router=i(d);availableLanguages=[{code:"es",name:"Spanish",nativeName:"Espa\xF1ol",flag:"\u{1F1EA}\u{1F1F8}"},{code:"en",name:"English",nativeName:"English",flag:"\u{1F1FA}\u{1F1F8}"}];defaultLanguage="es";_currentLang=u(this.getInitialLanguage());currentLang=this._currentLang.asReadonly();currentLanguageConfig=r(()=>this.availableLanguages.find(a=>a.code===this._currentLang())||this.availableLanguages[0]);isSpanish=r(()=>this._currentLang()==="es");isEnglish=r(()=>this._currentLang()==="en");constructor(){if(n(this.platformId)){this.router.events.pipe(s(e=>e instanceof p)).subscribe(e=>{this.syncLanguageFromUrl(e.urlAfterRedirects||e.url)});let a=this.getLanguageFromPath();a&&localStorage.setItem("hackeruna_lang",a)}}syncLanguageFromUrl(a){let t=a.split("/").filter(Boolean)[0];this.isValidLanguage(t)&&t!==this._currentLang()&&(this._currentLang.set(t),n(this.platformId)&&localStorage.setItem("hackeruna_lang",t))}getInitialLanguage(){if(!n(this.platformId))return this.defaultLanguage;let a=this.getLanguageFromPath();if(a)return a;let e=localStorage.getItem("hackeruna_lang");if(e&&this.isValidLanguage(e))return e;let t=navigator.language.split("-")[0];return this.isValidLanguage(t)?t:this.defaultLanguage}getLanguageFromPath(){if(!n(this.platformId))return null;let e=window.location.pathname.split("/").filter(Boolean)[0];return this.isValidLanguage(e)?e:null}isValidLanguage(a){return this.availableLanguages.some(e=>e.code===a)}switchLanguage(a,e=!1){this.isValidLanguage(a)&&(!e&&a===this._currentLang()||(this._currentLang.set(a),n(this.platformId)&&(localStorage.setItem("hackeruna_lang",a),this.updateUrlLanguage(a))))}updateUrlLanguage(a){let t=this.router.url.split("/").filter(Boolean);this.isValidLanguage(t[0])?t[0]=a:t.unshift(a);let L="/"+t.join("/");this.router.navigateByUrl(L)}setLanguageFromUrl(a){this.isValidLanguage(a)&&(this._currentLang.set(a),n(this.platformId)&&localStorage.setItem("hackeruna_lang",a))}getAlternateLanguage(){let a=this._currentLang();return this.availableLanguages.find(e=>e.code!==a)||this.availableLanguages[1]}static \u0275fac=function(e){return new(e||g)};static \u0275prov=o({token:g,factory:g.\u0275fac,providedIn:"root"})};export{c as a};
