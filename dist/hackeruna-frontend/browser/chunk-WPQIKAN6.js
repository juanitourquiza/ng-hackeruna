import{a as b}from"./chunk-FPAH3HGM.js";import{b as a,c as d}from"./chunk-NQOYLAOI.js";import{P as l,U as u,r as i}from"./chunk-XLADJG7K.js";var h=class g{constructor(t){this.http=t}apiUrl=b.wordpressApiUrl;getPosts(t=1,e=10,s,o,n){let r=new a().set("page",t.toString()).set("per_page",e.toString()).set("_embed","true");return s&&(r=r.set("categories",s.toString())),o&&(r=r.set("search",o)),n!==void 0&&(r=r.set("sticky",n.toString())),this.http.get(`${this.apiUrl}/posts`,{params:r,observe:"response"}).pipe(i(p=>({data:p.body||[],total:parseInt(p.headers.get("X-WP-Total")||"0",10),totalPages:parseInt(p.headers.get("X-WP-TotalPages")||"0",10)})))}getPostBySlug(t){let e=new a().set("slug",t).set("_embed","true");return this.http.get(`${this.apiUrl}/posts`,{params:e}).pipe(i(s=>s[0]))}getPostById(t){let e=new a().set("_embed","true");return this.http.get(`${this.apiUrl}/posts/${t}`,{params:e})}getFeaturedPosts(t=1){let e=new a().set("sticky","true").set("per_page",t.toString()).set("_embed","true");return this.http.get(`${this.apiUrl}/posts`,{params:e})}getCategories(){let t=new a().set("per_page","100");return this.http.get(`${this.apiUrl}/categories`,{params:t})}getCategoryBySlug(t){let e=new a().set("slug",t);return this.http.get(`${this.apiUrl}/categories`,{params:e}).pipe(i(s=>s[0]))}getTags(){let t=new a().set("per_page","100");return this.http.get(`${this.apiUrl}/tags`,{params:t})}getAuthorById(t){return this.http.get(`${this.apiUrl}/users/${t}`)}getAuthorBySlug(t){let e=new a().set("slug",t);return this.http.get(`${this.apiUrl}/users`,{params:e}).pipe(i(s=>s[0]))}getPostsByAuthor(t,e=1,s=10){let o=new a().set("author",t.toString()).set("page",e.toString()).set("per_page",s.toString()).set("_embed","true");return this.http.get(`${this.apiUrl}/posts`,{params:o,observe:"response"}).pipe(i(n=>({data:n.body||[],total:parseInt(n.headers.get("X-WP-Total")||"0",10),totalPages:parseInt(n.headers.get("X-WP-TotalPages")||"0",10)})))}getPostsByCategory(t,e=1,s=10){return this.getPosts(e,s,t)}searchPosts(t,e=1,s=10){return this.getPosts(e,s,void 0,t)}getMostReadPosts(t=4){let e=new a().set("per_page","20").set("_embed","true");return this.http.get(`${this.apiUrl}/posts`,{params:e}).pipe(i(s=>s.sort((n,r)=>{let p=n.views||n.post_views||n.post_views_count||0;return(r.views||r.post_views||r.post_views_count||0)-p}).slice(0,t)))}get translateApiUrl(){return this.apiUrl.replace("/wp/v2","/hackeruna/v1")}getTranslatedPost(t,e){return e==="es"?this.getPostById(t).pipe(i(s=>this.mapToTranslatedPost(s,"es"))):this.http.get(`${this.translateApiUrl}/post/${t}/translate/${e}`)}getTranslatedPostBySlug(t,e){return e==="es"?this.getPostBySlug(t).pipe(i(s=>this.mapToTranslatedPost(s,"es"))):this.http.get(`${this.translateApiUrl}/post/slug/${t}/translate/${e}`)}getTranslationStatus(t){return this.http.get(`${this.translateApiUrl}/post/${t}/translations`)}mapToTranslatedPost(t,e){return{id:t.id,original_id:t.id,language:e,title:t.title.rendered,content:t.content.rendered,excerpt:t.excerpt.rendered,slug:t.slug,date:t.date,modified:t.modified,cached:!0,translated_at:null,model_used:null,_embedded:t._embedded}}static \u0275fac=function(e){return new(e||g)(u(d))};static \u0275prov=l({token:g,factory:g.\u0275fac,providedIn:"root"})};export{h as a};
