import{a as S}from"./chunk-P6RK7PAL.js";import{a as P}from"./chunk-AXBRVXEE.js";import{b as E,e as v}from"./chunk-5QKZL5BP.js";import"./chunk-FPAH3HGM.js";import"./chunk-QX5GJNOG.js";import{Bb as O,Cb as D,Db as f,Ea as _,Ia as m,Qa as k,Ra as l,S as b,Ua as c,Wa as y,Xa as M,Ya as a,Za as n,_a as d,bb as p,cb as s,db as w,eb as g,kb as I,la as u,ta as x,ua as h,wa as r}from"./chunk-DCY6GUQE.js";var F=o=>["/post",o];function W(o,t){if(o&1&&(a(0,"article",5)(1,"a",6)(2,"div",7),d(3,"img",8),n(),d(4,"h3",9),a(5,"p",10),s(6),n(),d(7,"div",11),n()()),o&2){let e=t.$implicit,i=p(2);r(),l("routerLink",I(6,F,e.slug)),r(2),l("src",i.getPostImage(e),h)("alt",i.stripHtml(e.title.rendered)),r(),l("innerHTML",e.title.rendered,x),r(2),g(" ",i.formatDate(e.date)," "),r(),l("innerHTML",e.excerpt.rendered,x)}}function A(o,t){if(o&1&&(a(0,"section",1)(1,"h2",2),s(2," Art\xEDculos Relacionados "),n(),a(3,"div",3),m(4,W,8,8,"article",4),n()()),o&2){let e=p();r(4),l("ngForOf",e.relatedPosts())("ngForTrackBy",e.trackByPostId)}}var C=class o{currentPostId;categoryId;wpApi=b(P);relatedPosts=u([]);ngOnInit(){this.loadRelatedPosts()}loadRelatedPosts(){this.categoryId?this.wpApi.getPostsByCategory(this.categoryId,1,6).subscribe({next:t=>{let e=t.data.filter(i=>i.id!==this.currentPostId);this.relatedPosts.set(e.slice(0,3))},error:t=>{console.error("Error loading related posts:",t),this.loadRecentPosts()}}):this.loadRecentPosts()}loadRecentPosts(){this.wpApi.getPosts(1,6).subscribe({next:t=>{let e=t.data.filter(i=>i.id!==this.currentPostId);this.relatedPosts.set(e.slice(0,3))},error:t=>{console.error("Error loading recent posts:",t)}})}getPostImage(t){return t._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"https://backend.hackeruna.com/wp-content/themes/magazinebook/img/default-bg-img.png"}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}stripHtml(t){let e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}trackByPostId(t,e){return e.id}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-related-posts"]],inputs:{currentPostId:"currentPostId",categoryId:"categoryId"},decls:1,vars:1,consts:[["class","mt-16 pt-12","style","border-top: 1px solid var(--border-color);",4,"ngIf"],[1,"mt-16","pt-12",2,"border-top","1px solid var(--border-color)"],[1,"text-2xl","font-bold","mb-8",2,"color","var(--text-primary)"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],["class","group",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group"],[3,"routerLink"],[1,"mb-4","overflow-hidden","rounded-lg"],["loading","lazy",1,"w-full","h-48","object-cover","transition-transform","duration-300","group-hover:scale-110",3,"src","alt"],[1,"text-lg","font-semibold","leading-snug","mb-2","group-hover:underline",2,"color","var(--text-primary)",3,"innerHTML"],[1,"text-sm","mb-2",2,"color","var(--text-tertiary)"],[1,"text-sm","line-clamp-2",2,"color","var(--text-secondary)",3,"innerHTML"]],template:function(e,i){e&1&&m(0,A,5,2,"section",0),e&2&&l("ngIf",i.relatedPosts().length>0)},dependencies:[f,O,D,v],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}"],changeDetection:0})};var L=(o,t)=>t.id;function N(o,t){o&1&&d(0,"app-skeleton-loader",2)}function $(o,t){if(o&1&&(a(0,"div",3),s(1),a(2,"div",6)(3,"a",7),s(4," Volver al inicio "),n()()()),o&2){let e=p();r(),g(" ",e.error()," ")}}function B(o,t){o&1&&(a(0,"span"),s(1,", "),n())}function j(o,t){if(o&1&&(a(0,"span",23),s(1),m(2,B,2,0,"span"),n()),o&2){let e=t.$implicit,i=t.$index,H=t.$count;r(),g(" ",e.name,""),r(),c(i!==H-1?2:-1)}}function U(o,t){if(o&1&&(a(0,"span",22),s(1,"/"),n(),y(2,j,3,2,"span",23,L)),o&2){let e=p(2);r(2),M(e.categories)}}function V(o,t){if(o&1&&(a(0,"span",11),s(1),n()),o&2){let e=t.$implicit;r(),g(" ",e.name," ")}}function q(o,t){if(o&1&&(a(0,"article",4)(1,"nav",8)(2,"a",9),s(3," Inicio "),n(),m(4,U,4,0),n(),a(5,"div",10),y(6,V,2,1,"span",11,L),n(),d(8,"h1",12),a(9,"div",13)(10,"span",14),s(11,"person"),n(),a(12,"span",15),s(13),n(),a(14,"span",14),s(15,"calendar_today"),n(),a(16,"time"),s(17),n()(),a(18,"div",16),d(19,"img",17),n(),d(20,"div",18),a(21,"div",19)(22,"a",20)(23,"span",21),s(24,"arrow_back"),n(),s(25," Volver al inicio "),n()()()),o&2){let e=p();r(4),c(e.categories.length>0?4:-1),r(2),M(e.categories),r(2),l("innerHTML",e.post().title.rendered,x),r(5),g("Por ",e.authorName,""),r(3),k("datetime",e.post().date),r(),w(e.formatDate(e.post().date)),r(2),l("src",e.featuredImage,h)("alt",e.post().title.rendered),r(),l("innerHTML",e.post().content.rendered,x)}}function G(o,t){if(o&1&&d(0,"app-related-posts",5),o&2){let e,i=p();l("currentPostId",i.post().id)("categoryId",(e=i.post())==null||e._embedded==null||e._embedded["wp:term"]==null||e._embedded["wp:term"][0]==null||e._embedded["wp:term"][0][0]==null?null:e._embedded["wp:term"][0][0].id)}}var T=class o{route=b(E);wpApi=b(P);post=u(null);loading=u(!0);error=u(null);ngOnInit(){this.route.params.subscribe(t=>{let e=t.slug;e&&this.loadPost(e)})}loadPost(t){this.loading.set(!0),this.error.set(null),this.wpApi.getPostBySlug(t).subscribe({next:e=>{this.post.set(e),this.loading.set(!1)},error:e=>{console.error("Error loading post:",e),this.error.set("No se pudo cargar el art\xEDculo"),this.loading.set(!1)}})}get featuredImage(){return this.post()?._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"https://backend.hackeruna.com/wp-content/themes/magazinebook/img/default-bg-img.png"}get authorName(){return this.post()?._embedded?.author?.[0]?.name||"Anonymous"}get categoryName(){return this.post()?._embedded?.["wp:term"]?.[0]?.[0]?.name||"Uncategorized"}get categories(){return this.post()?._embedded?.["wp:term"]?.[0]||[]}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-post-detail"]],decls:6,vars:4,consts:[[1,"py-12"],[1,"max-w-5xl","mx-auto","px-4","sm:px-6","lg:px-8"],["type","post-detail"],[1,"bg-red-100","dark:bg-red-900","border","border-red-400","dark:border-red-700","text-red-700","dark:text-red-200","px-4","py-3","rounded","mb-8"],[1,"prose","prose-lg","max-w-none"],[3,"currentPostId","categoryId"],[1,"mt-4"],["routerLink","/",1,"text-primary","hover:underline"],[1,"mb-8","text-sm"],["routerLink","/",1,"no-underline","hover:underline","transition-all",2,"color","var(--text-secondary)"],[1,"mb-6","flex","flex-wrap","gap-2"],[1,"text-xs","font-mono","uppercase","tracking-wider","text-white","py-1.5","px-4","inline-block","rounded",2,"background-color","var(--accent-blue)"],[1,"text-4xl","md:text-5xl","font-bold","leading-tight","mb-6",2,"color","var(--text-primary)",3,"innerHTML"],[1,"flex","items-center","mb-10","text-sm","not-prose",2,"color","var(--text-tertiary)"],[1,"material-symbols-outlined","text-base","mr-2"],[1,"mr-4"],[1,"mb-10","-mx-4","sm:-mx-6","lg:-mx-8"],["loading","lazy",1,"w-full","h-auto","object-cover",3,"src","alt"],[1,"text-lg","leading-relaxed",2,"color","var(--text-primary)",3,"innerHTML"],[1,"mt-12","pt-8","not-prose",2,"border-top","1px solid var(--border-color)"],["routerLink","/",1,"inline-flex","items-center","font-semibold","hover:underline","transition-all",2,"color","var(--accent-blue)"],[1,"material-symbols-outlined","mr-2"],[1,"mx-2",2,"color","var(--text-tertiary)"],[2,"color","var(--text-tertiary)"]],template:function(e,i){e&1&&(a(0,"main",0)(1,"div",1),m(2,N,1,0,"app-skeleton-loader",2)(3,$,5,1,"div",3)(4,q,26,8,"article",4)(5,G,1,2,"app-related-posts",5),n()()),e&2&&(r(2),c(i.loading()?2:-1),r(),c(i.error()?3:-1),r(),c(i.post()&&!i.loading()?4:-1),r(),c(i.post()&&!i.loading()?5:-1))},dependencies:[f,v,C,S],styles:["[_nghost-%COMP%]     .prose{color:var(--text-primary)}[_nghost-%COMP%]     .prose h1, [_nghost-%COMP%]     .prose h2, [_nghost-%COMP%]     .prose h3, [_nghost-%COMP%]     .prose h4, [_nghost-%COMP%]     .prose h5, [_nghost-%COMP%]     .prose h6{color:var(--text-primary);font-weight:700;margin-top:2rem;margin-bottom:1rem}[_nghost-%COMP%]     .prose p{color:var(--text-primary);margin-bottom:1.5rem;line-height:1.75}[_nghost-%COMP%]     .prose a{color:var(--accent-blue);text-decoration:underline}[_nghost-%COMP%]     .prose a:hover{opacity:.8}[_nghost-%COMP%]     .prose strong, [_nghost-%COMP%]     .prose b{color:var(--text-primary);font-weight:600}[_nghost-%COMP%]     .prose code{background-color:#e8e8e8;color:#1a1a1a;padding:.2rem .4rem;border-radius:.25rem;font-size:.9em;font-family:Courier New,Courier,monospace;font-weight:500}[_nghost-%COMP%]     .prose pre{background-color:#2d2d2d;color:#e8e8e8;border:1px solid var(--border-color);border-radius:.5rem;padding:1rem;overflow-x:auto}[_nghost-%COMP%]     .prose pre code{background:none;padding:0;color:inherit}html.dark   [_nghost-%COMP%]     .prose code{background-color:#1e1e1e;color:#e8e8e8}html.dark   [_nghost-%COMP%]     .prose pre{background-color:#1e1e1e;color:#e8e8e8;border-color:#3a3a3a}[_nghost-%COMP%]     .prose blockquote{border-left:4px solid var(--accent-blue);background-color:var(--bg-secondary);padding:1rem 1.5rem;margin:1.5rem 0;font-style:italic;color:var(--text-secondary)}[_nghost-%COMP%]     .prose ul, [_nghost-%COMP%]     .prose ol{color:var(--text-primary);margin-bottom:1.5rem;padding-left:1.5rem}[_nghost-%COMP%]     .prose li{margin-bottom:.5rem}[_nghost-%COMP%]     .prose img{border-radius:.5rem;width:100%;height:auto}[_nghost-%COMP%]     .prose hr{border-color:var(--border-color);margin:2rem 0}[_nghost-%COMP%]     .prose table{width:100%;border-collapse:collapse;margin:1.5rem 0}[_nghost-%COMP%]     .prose table th, [_nghost-%COMP%]     .prose table td{border:1px solid var(--border-color);padding:.75rem;text-align:left}[_nghost-%COMP%]     .prose table th{background-color:var(--bg-secondary);font-weight:600;color:var(--text-primary)}[_nghost-%COMP%]     .prose table td{color:var(--text-primary)}"]})};export{T as PostDetailComponent};
