import{a as b}from"./chunk-WRH7NMGT.js";import{a as _,b as k}from"./chunk-F66C7T2K.js";import{b as v}from"./chunk-SUNVBWSZ.js";import"./chunk-FPAH3HGM.js";import"./chunk-RLACU72E.js";import{Ab as y,Ea as x,Ia as m,Ra as o,S as l,Ya as s,Za as a,_a as g,bb as c,cb as d,eb as f,la as p,wa as n,yb as u,zb as h}from"./chunk-A377WO76.js";function I(t,r){if(t&1&&(s(0,"p",8),d(1),a()),t&2){let e=c();n(),f(' Buscando: "',e.searchQuery(),'" ')}}function S(t,r){t&1&&g(0,"app-loading-spinner")}function F(t,r){if(t&1&&(s(0,"div",9),d(1),a()),t&2){let e=c();n(),f(" ",e.error()," ")}}function P(t,r){t&1&&(s(0,"div",10),d(1," No se encontraron resultados para tu b\xFAsqueda. "),a())}function T(t,r){if(t&1&&g(0,"app-post-card",13),t&2){let e=r.$implicit;o("post",e)}}function E(t,r){if(t&1&&(s(0,"div",11),m(1,T,1,1,"app-post-card",12),a()),t&2){let e=c();n(),o("ngForOf",e.results())("ngForTrackBy",e.trackByPostId)}}var C=class t{route=l(v);wpApi=l(_);searchQuery=p("");results=p([]);loading=p(!0);error=p(null);ngOnInit(){this.route.queryParams.subscribe(r=>{let e=r.q;e&&(this.searchQuery.set(e),this.performSearch(e))})}performSearch(r){this.loading.set(!0),this.error.set(null),this.wpApi.searchPosts(r).subscribe({next:e=>{this.results.set(e.data),this.loading.set(!1)},error:e=>{console.error("Error searching posts:",e),this.error.set("Error al realizar la b\xFAsqueda"),this.loading.set(!1)}})}trackByPostId(r,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=x({type:t,selectors:[["app-search"]],decls:9,vars:5,consts:[[1,"py-8","lg:py-12"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-3xl","font-bold","text-text-light-primary","dark:text-dark-primary","mb-2"],["class","text-lg text-text-light-secondary dark:text-dark-secondary mb-8",4,"ngIf"],[4,"ngIf"],["class","bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded mb-8",4,"ngIf"],["class","text-center py-12 text-text-light-secondary dark:text-dark-secondary",4,"ngIf"],["class","space-y-12",4,"ngIf"],[1,"text-lg","text-text-light-secondary","dark:text-dark-secondary","mb-8"],[1,"bg-red-100","dark:bg-red-900","border","border-red-400","dark:border-red-700","text-red-700","dark:text-red-200","px-4","py-3","rounded","mb-8"],[1,"text-center","py-12","text-text-light-secondary","dark:text-dark-secondary"],[1,"space-y-12"],[3,"post",4,"ngFor","ngForOf","ngForTrackBy"],[3,"post"]],template:function(e,i){e&1&&(s(0,"main",0)(1,"div",1)(2,"h1",2),d(3," Resultados de b\xFAsqueda "),a(),m(4,I,2,1,"p",3)(5,S,1,0,"app-loading-spinner",4)(6,F,2,1,"div",5)(7,P,2,0,"div",6)(8,E,2,2,"div",7),a()()),e&2&&(n(4),o("ngIf",i.searchQuery()),n(),o("ngIf",i.loading()),n(),o("ngIf",i.error()),n(),o("ngIf",!i.loading()&&i.results().length===0),n(),o("ngIf",!i.loading()))},dependencies:[y,u,h,b,k],encapsulation:2,changeDetection:0})};export{C as SearchComponent};
