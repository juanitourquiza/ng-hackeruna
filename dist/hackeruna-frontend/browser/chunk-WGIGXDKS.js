import{a as D}from"./chunk-3UN55NVY.js";import{a as P,b as N}from"./chunk-KYUVX5UP.js";import{e as A}from"./chunk-M5FRH7GR.js";import"./chunk-AUXXTF6L.js";import"./chunk-B24TU2OJ.js";import{Ea as f,Ia as p,Oa as s,Pa as E,Qa as M,Ra as a,S as b,Sa as i,Ta as g,Ua as C,Va as x,Wa as d,Xa as l,Y as _,Z as h,Za as u,_ as T,cb as F,ia as k,la as c,rb as y,sb as O,ta as H,tb as v,wa as r}from"./chunk-IPQN3NVZ.js";var $=o=>["/post",o];function j(o,t){if(o&1&&(a(0,"article",4)(1,"span",5),l(2),i(),a(3,"div",6)(4,"a",7),g(5,"h4",8),i(),a(6,"p",9),l(7),i()()()),o&2){let e=t.$implicit,n=t.index,m=d();r(2),u(" ",(n+1).toString().padStart(2,"0")," "),r(2),s("routerLink",F(4,$,e.slug)),r(),s("innerHTML",m.stripHtml(e.title.rendered),H),r(2),u(" POR ",m.getAuthorName(e).toUpperCase()," ")}}var I=class o{posts=[];stripHtml(t){let e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}getAuthorName(t){return t._embedded?.author?.[0]?.name||"Anonymous"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-trending-sidebar"]],inputs:{posts:"posts"},decls:5,vars:1,consts:[[1,"sticky","top-8","p-6","rounded-lg",2,"background-color","var(--bg-secondary)"],[1,"text-sm","font-mono","uppercase","tracking-widest","pb-2","mb-6",2,"color","var(--text-primary)","border-bottom","2px solid var(--accent-blue)"],[1,"space-y-6"],["class","group flex items-start space-x-3",4,"ngFor","ngForOf"],[1,"group","flex","items-start","space-x-3"],[1,"text-2xl","font-mono","font-bold",2,"color","var(--accent-blue)"],[1,"flex-1"],[3,"routerLink"],[1,"text-base","font-semibold","leading-snug","group-hover:underline","transition-all",2,"color","var(--text-primary)",3,"innerHTML"],[1,"text-xs","uppercase","mt-1.5",2,"color","var(--text-tertiary)"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h3",1),l(2," Tendencias Globales "),i(),a(3,"div",2),p(4,j,8,6,"article",3),i()()),e&2&&(r(4),s("ngForOf",n.posts))},dependencies:[v,y,A],encapsulation:2})};function G(o,t){if(o&1){let e=C();a(0,"button",4),x("click",function(){let m=_(e).$implicit,w=d();return h(w.selectCategory(m.id))}),l(1),a(2,"span",5),l(3),i()()}if(o&2){let e=t.$implicit,n=d();E("background-color",n.selectedCategoryId()===e.id?"var(--accent-blue)":"var(--bg-tertiary)")("color",n.selectedCategoryId()===e.id?"white":"var(--text-secondary)"),M("active",n.selectedCategoryId()===e.id),r(),u(" ",e.name," "),r(2),u("(",e.count,")")}}var S=class o{wpApi=b(P);categories=c([]);selectedCategoryId=c(null);categorySelected=k();ngOnInit(){this.loadCategories()}loadCategories(){this.wpApi.getCategories().subscribe({next:t=>{let e=t.filter(n=>n.slug!=="uncategorized"&&n.count>0).slice(0,8);this.categories.set(e)},error:t=>{console.error("Error loading categories:",t)}})}selectCategory(t){this.selectedCategoryId.set(t),this.categorySelected.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-category-filter"]],outputs:{categorySelected:"categorySelected"},decls:5,vars:7,consts:[[1,"mb-8"],[1,"flex","flex-wrap","gap-3","items-center"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200",3,"click"],["class","category-btn px-4 py-2 text-sm font-medium rounded-full transition-all duration-200 hover:scale-105",3,"active","background-color","color","click",4,"ngFor","ngForOf"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200","hover:scale-105",3,"click"],[1,"ml-1","text-xs","opacity-75"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),x("click",function(){return n.selectCategory(null)}),l(3," Todos "),i(),p(4,G,4,8,"button",3),i()()),e&2&&(r(2),E("background-color",n.selectedCategoryId()?"var(--bg-tertiary)":"var(--accent-blue)")("color",n.selectedCategoryId()?"var(--text-secondary)":"white"),M("active",!n.selectedCategoryId()),r(2),s("ngForOf",n.categories()))},dependencies:[v,y],styles:[".category-btn[_ngcontent-%COMP%]{cursor:pointer;border:none;outline:none;white-space:nowrap}.category-btn[_ngcontent-%COMP%]:hover{opacity:.9}.category-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};function R(o,t){if(o&1&&g(0,"app-post-card",17),o&2){let e=d();s("post",e.featuredPost())("featured",!0)}}function B(o,t){o&1&&g(0,"app-loading-spinner")}function U(o,t){if(o&1&&(a(0,"div",18),l(1),i()),o&2){let e=d();r(),u(" ",e.error()," ")}}function q(o,t){o&1&&(a(0,"div",19),g(1,"app-loading-spinner"),i())}function J(o,t){if(o&1&&g(0,"app-post-card",22),o&2){let e=t.$implicit;s("post",e)}}function K(o,t){if(o&1&&(a(0,"div",20),p(1,J,1,1,"app-post-card",21),i()),o&2){let e=d();r(),s("ngForOf",e.recentPosts())}}function Q(o,t){o&1&&(a(0,"div",23),l(1," No hay art\xEDculos disponibles en este momento. "),i())}function X(o,t){o&1&&(a(0,"span"),l(1,"Cargar M\xE1s Art\xEDculos"),i())}function Y(o,t){o&1&&(a(0,"span",29),T(),a(1,"svg",30),g(2,"circle",31)(3,"path",32),i(),l(4," Cargando... "),i())}function Z(o,t){if(o&1){let e=C();a(0,"button",27),x("click",function(){_(e);let m=d(2);return h(m.loadMorePosts())}),p(1,X,2,0,"span",4)(2,Y,5,0,"span",28),i()}if(o&2){let e=d(2);s("disabled",e.loadingMore()),r(),s("ngIf",!e.loadingMore()),r(),s("ngIf",e.loadingMore())}}function ee(o,t){o&1&&(a(0,"div",33),l(1," Has visto todos los art\xEDculos disponibles "),i())}function te(o,t){if(o&1&&(a(0,"div",24),p(1,Z,3,3,"button",25)(2,ee,2,0,"div",26),i()),o&2){let e=d();r(),s("ngIf",e.hasMorePosts()),r(),s("ngIf",!e.hasMorePosts()&&e.recentPosts().length>0)}}var z=class o{wpApi=b(P);featuredPost=c(null);recentPosts=c([]);trendingPosts=c([]);loading=c(!0);loadingMore=c(!1);error=c(null);currentPage=c(1);totalPages=c(1);postsPerPage=6;hasMorePosts=c(!0);selectedCategoryId=c(null);ngOnInit(){this.loadHomeData()}loadHomeData(){this.loading.set(!0),this.error.set(null),this.wpApi.getFeaturedPosts(1).subscribe({next:t=>{t&&t.length>0?this.featuredPost.set(t[0]):this.wpApi.getPosts(1,1).subscribe({next:e=>{e.data.length>0&&this.featuredPost.set(e.data[0])}})},error:t=>{console.error("Error loading featured post:",t),this.error.set("Error al cargar el art\xEDculo destacado")}}),this.wpApi.getPosts(1,this.postsPerPage).subscribe({next:t=>{this.recentPosts.set(t.data),this.totalPages.set(t.totalPages),this.hasMorePosts.set(this.currentPage()<t.totalPages),this.loading.set(!1)},error:t=>{console.error("Error loading recent posts:",t),this.error.set("Error al cargar los art\xEDculos recientes"),this.loading.set(!1)}}),this.wpApi.getPosts(1,4).subscribe({next:t=>{this.trendingPosts.set(t.data)},error:t=>{console.error("Error loading trending posts:",t)}})}loadMorePosts(){if(this.loadingMore()||!this.hasMorePosts())return;this.loadingMore.set(!0);let t=this.currentPage()+1,e=this.selectedCategoryId();this.wpApi.getPosts(t,this.postsPerPage,e||void 0).subscribe({next:n=>{this.recentPosts.update(m=>[...m,...n.data]),this.currentPage.set(t),this.hasMorePosts.set(t<n.totalPages),this.loadingMore.set(!1)},error:n=>{console.error("Error loading more posts:",n),this.loadingMore.set(!1)}})}onCategorySelected(t){this.selectedCategoryId.set(t),this.currentPage.set(1),this.recentPosts.set([]),this.loading.set(!0),this.wpApi.getPosts(1,this.postsPerPage,t||void 0).subscribe({next:e=>{this.recentPosts.set(e.data),this.totalPages.set(e.totalPages),this.hasMorePosts.set(1<e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading filtered posts:",e),this.error.set("Error al cargar los art\xEDculos"),this.loading.set(!1)}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-home"]],decls:18,vars:8,consts:[[1,"py-0"],[1,"w-full"],[1,"relative","w-full","mb-12"],[3,"post","featured",4,"ngIf"],[4,"ngIf"],["class","bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded mb-8",4,"ngIf"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-4","gap-8"],[1,"col-span-1","md:col-span-2","lg:col-span-3"],[1,"text-sm","font-mono","uppercase","tracking-widest","pb-2","mb-8",2,"color","var(--text-primary)","border-bottom","2px solid var(--accent-blue)"],[3,"categorySelected"],["class","space-y-12",4,"ngIf"],["class","space-y-16",4,"ngIf"],["class","text-center py-12","style","color: var(--text-secondary);",4,"ngIf"],["class","mt-12 mb-20 text-center",4,"ngIf"],[1,"col-span-1","md:col-span-1","lg:col-span-1"],[3,"posts"],[3,"post","featured"],[1,"bg-red-100","dark:bg-red-900","border","border-red-400","dark:border-red-700","text-red-700","dark:text-red-200","px-4","py-3","rounded","mb-8"],[1,"space-y-12"],[1,"space-y-16"],[3,"post",4,"ngFor","ngForOf"],[3,"post"],[1,"text-center","py-12",2,"color","var(--text-secondary)"],[1,"mt-12","mb-20","text-center"],["class","inline-flex items-center px-8 py-3 text-sm font-medium rounded-full transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed","style","background-color: var(--accent-blue); color: white; box-shadow: 0 4px 12px rgba(0, 119, 255, 0.2);",3,"disabled","click",4,"ngIf"],["class","text-sm","style","color: var(--text-tertiary);",4,"ngIf"],[1,"inline-flex","items-center","px-8","py-3","text-sm","font-medium","rounded-full","transition-all","duration-300","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed",2,"background-color","var(--accent-blue)","color","white","box-shadow","0 4px 12px rgba(0, 119, 255, 0.2)",3,"click","disabled"],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-sm",2,"color","var(--text-tertiary)"]],template:function(e,n){e&1&&(a(0,"main",0)(1,"div",1)(2,"div",2),p(3,R,1,2,"app-post-card",3)(4,B,1,0,"app-loading-spinner",4),i(),p(5,U,2,1,"div",5),a(6,"div",6)(7,"div",7)(8,"div",8)(9,"h2",9),l(10," \xDAltimas Noticias "),i(),a(11,"app-category-filter",10),x("categorySelected",function(w){return n.onCategorySelected(w)}),i(),p(12,q,2,0,"div",11)(13,K,2,1,"div",12)(14,Q,2,0,"div",13)(15,te,3,2,"div",14),i(),a(16,"div",15),g(17,"app-trending-sidebar",16),i()()()()()),e&2&&(r(3),s("ngIf",n.featuredPost()),r(),s("ngIf",n.loading()&&!n.featuredPost()),r(),s("ngIf",n.error()),r(7),s("ngIf",n.loading()),r(),s("ngIf",!n.loading()),r(),s("ngIf",!n.loading()&&n.recentPosts().length===0),r(),s("ngIf",!n.loading()&&n.recentPosts().length>0),r(2),s("posts",n.trendingPosts()))},dependencies:[v,y,O,D,I,N,S],encapsulation:2})};export{z as HomeComponent};
