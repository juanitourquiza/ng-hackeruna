import{a as G}from"./chunk-DCEHSXAS.js";import{b as B,c as z}from"./chunk-ZVNRDAQC.js";import{a as U}from"./chunk-XNQXBV36.js";import{a as E}from"./chunk-6VFLZ5EG.js";import"./chunk-FPAH3HGM.js";import{a as q}from"./chunk-GUWDI6QZ.js";import{k as j}from"./chunk-T33PNWSJ.js";import"./chunk-7WVRIIHY.js";import{$a as h,Ab as L,Bb as g,Ga as i,Nb as R,Q as _,Ra as w,V as f,Va as V,W as C,Wa as x,X as A,ab as v,bb as y,eb as d,fa as s,fb as m,hb as D,ib as M,jb as b,kb as a,lb as r,mb as c,nb as S,ob as I,qb as $,rb as W,sb as P,ub as k,vb as F,wb as l,xb as N,yb as O,zb as p}from"./chunk-7HMXUCHC.js";function X(t,n){if(t&1){let e=P();S(0,"button",4),F("click",function(){let u=f(e).$implicit,H=l();return C(H.selectCategory(u.id))}),p(1),S(2,"span",5),p(3),I()()}if(t&2){let e=n.$implicit,o=l();N("background-color",o.selectedCategoryId()===e.id?"var(--accent-blue)":"var(--bg-tertiary)")("color",o.selectedCategoryId()===e.id?"white":"var(--text-secondary)"),O("active",o.selectedCategoryId()===e.id),i(),g(" ",e.name," "),i(2),g("(",e.count,")")}}var T=class t{wpApi=_(E);categories=s([]);selectedCategoryId=s(null);categorySelected=R();ngOnInit(){this.loadCategories()}loadCategories(){this.wpApi.getCategories().subscribe({next:n=>{let e=n.filter(o=>o.slug!=="uncategorized"&&o.count>0).slice(0,8);this.categories.set(e)},error:n=>{console.error("Error loading categories:",n)}})}selectCategory(n){this.selectedCategoryId.set(n),this.categorySelected.emit(n)}trackByCategoryId(n,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-category-filter"]],outputs:{categorySelected:"categorySelected"},decls:6,vars:6,consts:[[1,"mb-8"],[1,"flex","flex-wrap","gap-3","items-center"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200",3,"click"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200","hover:scale-105",3,"active","background-color","color"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200","hover:scale-105",3,"click"],[1,"ml-1","text-xs","opacity-75"]],template:function(e,o){e&1&&(S(0,"div",0)(1,"div",1)(2,"button",2),F("click",function(){return o.selectCategory(null)}),p(3," Todos "),I(),D(4,X,4,8,"button",3,o.trackByCategoryId,!0),I()()),e&2&&(i(2),N("background-color",o.selectedCategoryId()?"var(--bg-tertiary)":"var(--accent-blue)")("color",o.selectedCategoryId()?"var(--text-secondary)":"white"),O("active",!o.selectedCategoryId()),i(2),M(o.categories()))},styles:[".category-btn[_ngcontent-%COMP%]{cursor:pointer;border:none;outline:none;white-space:nowrap}.category-btn[_ngcontent-%COMP%]:hover{opacity:.9}.category-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}"],changeDetection:0})};var Y=()=>[import("./chunk-6TQG6NLI.js").then(t=>t.TrendingSidebarComponent)],Z=()=>[import("./chunk-3KY6CWFX.js").then(t=>t.FeaturedProjectsComponent)],ee=()=>[import("./chunk-CLQNS2RA.js").then(t=>t.PopularTutorialsComponent)],te=()=>[import("./chunk-CAZLO6BD.js").then(t=>t.UsefulResourcesComponent)],ne=(t,n)=>n.id;function oe(t,n){if(t&1&&c(0,"app-post-card",4),t&2){let e=l(2);b("post",e.featuredPost())("featured",!0)}}function ie(t,n){t&1&&c(0,"app-skeleton-loader",5)}function re(t,n){if(t&1&&(a(0,"div",6),p(1),r()),t&2){let e=l(2);i(),g(" ",e.error()," ")}}function ae(t,n){t&1&&c(0,"app-skeleton-loader",12)}function le(t,n){if(t&1&&c(0,"app-post-card",17),t&2){let e=n.$implicit;b("post",e)}}function se(t,n){if(t&1&&(a(0,"div",13),D(1,le,1,1,"app-post-card",17,ne),r()),t&2){let e=l(2);i(),M(e.recentPosts())}}function ce(t,n){if(t&1&&(a(0,"div",14),p(1),r()),t&2){let e=l().$implicit;i(),g(" ",e("search.noResults")," ")}}function de(t,n){if(t&1&&(a(0,"span"),p(1),r()),t&2){let e=l(3).$implicit;i(),L(e("home.viewAll"))}}function me(t,n){if(t&1&&(a(0,"span",21),A(),a(1,"svg",22),c(2,"circle",23)(3,"path",24),r(),p(4),r()),t&2){let e=l(3).$implicit;i(4),g(" ",e("common.loading")," ")}}function pe(t,n){if(t&1){let e=P();a(0,"button",20),k("click",function(){f(e);let u=l(3);return C(u.loadMorePosts())}),d(1,de,2,1,"span"),d(2,me,5,1,"span",21),r()}if(t&2){let e=l(3);b("disabled",e.loadingMore()),i(),m(e.loadingMore()?-1:1),i(),m(e.loadingMore()?2:-1)}}function ge(t,n){if(t&1&&(a(0,"div",19),p(1),r()),t&2){let e=l(2).$implicit;i(),g(" ",e("search.noResults")," ")}}function ue(t,n){if(t&1&&(a(0,"div",15),d(1,pe,3,3,"button",18),d(2,ge,2,1,"div",19),r()),t&2){let e=l(2);i(),m(e.hasMorePosts()?1:-1),i(),m(!e.hasMorePosts()&&e.recentPosts().length>0?2:-1)}}function _e(t,n){if(t&1&&c(0,"app-trending-sidebar",25),t&2){let e=l(2);b("posts",e.trendingPosts())}}function fe(t,n){t&1&&(a(0,"div",26),c(1,"div",27)(2,"div",27)(3,"div",27),r())}function Ce(t,n){t&1&&c(0,"app-featured-projects")}function xe(t,n){t&1&&(a(0,"div",28),c(1,"div",29),r())}function he(t,n){t&1&&c(0,"app-popular-tutorials")}function ve(t,n){t&1&&(a(0,"div",30)(1,"div",7),c(2,"div",31),r()())}function ye(t,n){t&1&&c(0,"app-useful-resources")}function be(t,n){t&1&&(a(0,"div",28),c(1,"div",29),r())}function Pe(t,n){if(t&1){let e=P();$(0),a(1,"main",1)(2,"div",2)(3,"div",3),d(4,oe,1,2,"app-post-card",4),d(5,ie,1,0,"app-skeleton-loader",5),r(),d(6,re,2,1,"div",6),a(7,"div",7)(8,"div",8)(9,"div",9)(10,"h2",10),p(11),r(),a(12,"app-category-filter",11),k("categorySelected",function(u){f(e);let H=l();return C(H.onCategorySelected(u))}),r(),d(13,ae,1,0,"app-skeleton-loader",12),d(14,se,3,0,"div",13),d(15,ce,2,1,"div",14),d(16,ue,3,2,"div",15),r(),a(17,"div",16),x(18,_e,1,1)(19,fe,4,0),h(20,18,Y,null,19),y(0,-1),v(),r()()(),x(22,Ce,1,0)(23,xe,2,0),h(24,22,Z,null,23),y(0,-1),v(),x(26,he,1,0)(27,ve,3,0),h(28,26,ee,null,27),y(0,-1),v(),x(30,ye,1,0)(31,be,2,0),h(32,30,te,null,31),y(0,-1),v(),r()(),W()}if(t&2){let e=n.$implicit,o=l();i(4),m(o.featuredPost()?4:-1),i(),m(o.loading()&&!o.featuredPost()?5:-1),i(),m(o.error()?6:-1),i(5),g(" ",e("home.recentPosts")," "),i(2),m(o.loading()?13:-1),i(),m(o.loading()?-1:14),i(),m(!o.loading()&&o.recentPosts().length===0?15:-1),i(),m(!o.loading()&&o.recentPosts().length>0?16:-1)}}var J=class t{wpApi=_(E);route=_(j);languageService=_(q);get currentLang(){return this.languageService.currentLang()}featuredPost=s(null);recentPosts=s([]);trendingPosts=s([]);loading=s(!0);loadingMore=s(!1);error=s(null);currentPage=s(1);totalPages=s(1);postsPerPage=6;hasMorePosts=s(!0);selectedCategoryId=s(null);ngOnInit(){this.route.queryParams.subscribe(n=>{let e=n.category?Number(n.category):null;this.selectedCategoryId.set(e),this.loadHomeData()})}loadHomeData(){this.loading.set(!0),this.error.set(null),this.currentPage.set(1);let n=this.selectedCategoryId();n?this.featuredPost.set(null):this.wpApi.getFeaturedPosts(1).subscribe({next:e=>{e&&e.length>0?this.featuredPost.set(e[0]):this.wpApi.getPosts(1,1).subscribe({next:o=>{o.data.length>0&&this.featuredPost.set(o.data[0])}})},error:e=>{console.error("Error loading featured post:",e),this.error.set("Error al cargar el art\xEDculo destacado")}}),this.wpApi.getPosts(1,this.postsPerPage,n||void 0).subscribe({next:e=>{this.recentPosts.set(e.data),this.totalPages.set(e.totalPages),this.hasMorePosts.set(this.currentPage()<e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading recent posts:",e),this.error.set("Error al cargar los art\xEDculos recientes"),this.loading.set(!1)}}),this.wpApi.getMostReadPosts(4).subscribe({next:e=>{this.trendingPosts.set(e)},error:e=>{console.error("Error loading most read posts:",e),this.wpApi.getPosts(1,4).subscribe({next:o=>{this.trendingPosts.set(o.data)}})}})}loadMorePosts(){if(this.loadingMore()||!this.hasMorePosts())return;this.loadingMore.set(!0);let n=this.currentPage()+1,e=this.selectedCategoryId();this.wpApi.getPosts(n,this.postsPerPage,e||void 0).subscribe({next:o=>{this.recentPosts.update(u=>[...u,...o.data]),this.currentPage.set(n),this.hasMorePosts.set(n<o.totalPages),this.loadingMore.set(!1)},error:o=>{console.error("Error loading more posts:",o),this.loadingMore.set(!1)}})}onCategorySelected(n){this.selectedCategoryId.set(n),this.currentPage.set(1),this.recentPosts.set([]),this.loading.set(!0),this.wpApi.getPosts(1,this.postsPerPage,n||void 0).subscribe({next:e=>{this.recentPosts.set(e.data),this.totalPages.set(e.totalPages),this.hasMorePosts.set(1<e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading filtered posts:",e),this.error.set("Error al cargar los art\xEDculos"),this.loading.set(!1)}})}trackByPostId(n,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-home"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"py-0"],[1,"w-full"],[1,"relative","w-full","mb-12"],[3,"post","featured"],["type","post-featured"],[1,"bg-red-100","dark:bg-red-900","border","border-red-400","dark:border-red-700","text-red-700","dark:text-red-200","px-4","py-3","rounded","mb-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-4","gap-8"],[1,"col-span-1","md:col-span-2","lg:col-span-3"],[1,"text-sm","font-mono","uppercase","tracking-widest","pb-2","mb-8",2,"color","var(--text-primary)","border-bottom","2px solid var(--accent-blue)"],[3,"categorySelected"],["type","post-list"],[1,"space-y-16"],[1,"text-center","py-12",2,"color","var(--text-secondary)"],[1,"mt-12","mb-20","text-center"],[1,"col-span-1","md:col-span-1","lg:col-span-1"],[3,"post"],[1,"inline-flex","items-center","px-8","py-3","text-sm","font-medium","rounded-full","transition-all","duration-300","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed",2,"background-color","var(--accent-blue)","color","white","box-shadow","0 4px 12px rgba(0, 119, 255, 0.2)",3,"disabled"],[1,"text-sm",2,"color","var(--text-tertiary)"],[1,"inline-flex","items-center","px-8","py-3","text-sm","font-medium","rounded-full","transition-all","duration-300","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed",2,"background-color","var(--accent-blue)","color","white","box-shadow","0 4px 12px rgba(0, 119, 255, 0.2)",3,"click","disabled"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[3,"posts"],[1,"space-y-4"],[1,"h-32","bg-gray-200","dark:bg-gray-700","animate-pulse","rounded"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-12"],[1,"h-64","bg-gray-200","dark:bg-gray-700","animate-pulse","rounded-lg"],[1,"py-12"],[1,"h-48","bg-gray-200","dark:bg-gray-700","animate-pulse","rounded-lg"]],template:function(e,o){e&1&&V(0,Pe,34,8,"ng-container",0)},dependencies:[z,B,G,T,U],encapsulation:2,changeDetection:0})};export{J as HomeComponent};
