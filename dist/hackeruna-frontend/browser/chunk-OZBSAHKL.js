import{a as N}from"./chunk-WDNHHNI7.js";import{a as W}from"./chunk-K6MG62TO.js";import{a as k}from"./chunk-L7NXBSMW.js";import"./chunk-FPAH3HGM.js";import{k as V}from"./chunk-TD4QLYMH.js";import{$a as g,Ga as a,Mb as A,Oa as P,Ob as S,S as _,Sa as d,Xa as C,Y as b,Ya as h,Z as v,Za as y,_ as I,ab as T,bb as D,db as c,fb as F,gb as O,hb as r,ia as M,ib as i,jb as l,kb as w,la as s,lb as f,mb as p,nb as m,pb as x}from"./chunk-IIT7GGWY.js";function z(t,o){if(t&1){let e=w();r(0,"button",4),f("click",function(){let u=b(e).$implicit,H=p();return v(H.selectCategory(u.id))}),m(1),r(2,"span",5),m(3),i()()}if(t&2){let e=o.$implicit,n=p();T("background-color",n.selectedCategoryId()===e.id?"var(--accent-blue)":"var(--bg-tertiary)")("color",n.selectedCategoryId()===e.id?"white":"var(--text-secondary)"),D("active",n.selectedCategoryId()===e.id),a(),x(" ",e.name," "),a(2),x("(",e.count,")")}}var E=class t{wpApi=_(k);categories=s([]);selectedCategoryId=s(null);categorySelected=M();ngOnInit(){this.loadCategories()}loadCategories(){this.wpApi.getCategories().subscribe({next:o=>{let e=o.filter(n=>n.slug!=="uncategorized"&&n.count>0).slice(0,8);this.categories.set(e)},error:o=>{console.error("Error loading categories:",o)}})}selectCategory(o){this.selectedCategoryId.set(o),this.categorySelected.emit(o)}trackByCategoryId(o,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-category-filter"]],outputs:{categorySelected:"categorySelected"},decls:5,vars:8,consts:[[1,"mb-8"],[1,"flex","flex-wrap","gap-3","items-center"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200",3,"click"],["class","category-btn px-4 py-2 text-sm font-medium rounded-full transition-all duration-200 hover:scale-105",3,"active","background-color","color","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"category-btn","px-4","py-2","text-sm","font-medium","rounded-full","transition-all","duration-200","hover:scale-105",3,"click"],[1,"ml-1","text-xs","opacity-75"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return n.selectCategory(null)}),m(3," Todos "),i(),d(4,z,4,8,"button",3),i()()),e&2&&(a(2),T("background-color",n.selectedCategoryId()?"var(--bg-tertiary)":"var(--accent-blue)")("color",n.selectedCategoryId()?"var(--text-secondary)":"white"),D("active",!n.selectedCategoryId()),a(2),g("ngForOf",n.categories())("ngForTrackBy",n.trackByCategoryId))},dependencies:[S,A],styles:[".category-btn[_ngcontent-%COMP%]{cursor:pointer;border:none;outline:none;white-space:nowrap}.category-btn[_ngcontent-%COMP%]:hover{opacity:.9}.category-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}"],changeDetection:0})};var R=()=>[import("./chunk-KMNVPYSJ.js").then(t=>t.TrendingSidebarComponent)],q=()=>[import("./chunk-ZJH4JEL5.js").then(t=>t.FeaturedProjectsComponent)],G=()=>[import("./chunk-B3WNUQQT.js").then(t=>t.PopularTutorialsComponent)],L=()=>[import("./chunk-2CGLMVQQ.js").then(t=>t.UsefulResourcesComponent)],U=(t,o)=>o.id;function J(t,o){if(t&1&&l(0,"app-post-card",3),t&2){let e=p();g("post",e.featuredPost())("featured",!0)}}function K(t,o){t&1&&l(0,"app-skeleton-loader",4)}function Q(t,o){if(t&1&&(r(0,"div",5),m(1),i()),t&2){let e=p();a(),x(" ",e.error()," ")}}function X(t,o){t&1&&l(0,"app-skeleton-loader",11)}function Y(t,o){if(t&1&&l(0,"app-post-card",16),t&2){let e=o.$implicit;g("post",e)}}function Z(t,o){if(t&1&&(r(0,"div",12),F(1,Y,1,1,"app-post-card",16,U),i()),t&2){let e=p();a(),O(e.recentPosts())}}function ee(t,o){t&1&&(r(0,"div",13),m(1," No hay art\xEDculos disponibles en este momento. "),i())}function te(t,o){t&1&&(r(0,"span"),m(1,"Cargar M\xE1s Art\xEDculos"),i())}function oe(t,o){t&1&&(r(0,"span",20),I(),r(1,"svg",21),l(2,"circle",22)(3,"path",23),i(),m(4," Cargando... "),i())}function ne(t,o){if(t&1){let e=w();r(0,"button",19),f("click",function(){b(e);let u=p(2);return v(u.loadMorePosts())}),d(1,te,2,0,"span")(2,oe,5,0,"span",20),i()}if(t&2){let e=p(2);g("disabled",e.loadingMore()),a(),c(e.loadingMore()?-1:1),a(),c(e.loadingMore()?2:-1)}}function ie(t,o){t&1&&(r(0,"div",18),m(1," Has visto todos los art\xEDculos disponibles "),i())}function re(t,o){if(t&1&&(r(0,"div",14),d(1,ne,3,3,"button",17)(2,ie,2,0,"div",18),i()),t&2){let e=p();a(),c(e.hasMorePosts()?1:-1),a(),c(!e.hasMorePosts()&&e.recentPosts().length>0?2:-1)}}function ae(t,o){if(t&1&&l(0,"app-trending-sidebar",24),t&2){let e=p();g("posts",e.trendingPosts())}}function se(t,o){t&1&&(r(0,"div",25),l(1,"div",26)(2,"div",26)(3,"div",26),i())}function le(t,o){t&1&&l(0,"app-featured-projects")}function de(t,o){t&1&&(r(0,"div",27),l(1,"div",28),i())}function ce(t,o){t&1&&l(0,"app-popular-tutorials")}function pe(t,o){t&1&&(r(0,"div",29)(1,"div",6),l(2,"div",30),i()())}function me(t,o){t&1&&l(0,"app-useful-resources")}function ue(t,o){t&1&&(r(0,"div",27),l(1,"div",28),i())}var B=class t{wpApi=_(k);route=_(V);featuredPost=s(null);recentPosts=s([]);trendingPosts=s([]);loading=s(!0);loadingMore=s(!1);error=s(null);currentPage=s(1);totalPages=s(1);postsPerPage=6;hasMorePosts=s(!0);selectedCategoryId=s(null);ngOnInit(){this.route.queryParams.subscribe(o=>{let e=o.category?Number(o.category):null;this.selectedCategoryId.set(e),this.loadHomeData()})}loadHomeData(){this.loading.set(!0),this.error.set(null),this.currentPage.set(1);let o=this.selectedCategoryId();o?this.featuredPost.set(null):this.wpApi.getFeaturedPosts(1).subscribe({next:e=>{e&&e.length>0?this.featuredPost.set(e[0]):this.wpApi.getPosts(1,1).subscribe({next:n=>{n.data.length>0&&this.featuredPost.set(n.data[0])}})},error:e=>{console.error("Error loading featured post:",e),this.error.set("Error al cargar el art\xEDculo destacado")}}),this.wpApi.getPosts(1,this.postsPerPage,o||void 0).subscribe({next:e=>{this.recentPosts.set(e.data),this.totalPages.set(e.totalPages),this.hasMorePosts.set(this.currentPage()<e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading recent posts:",e),this.error.set("Error al cargar los art\xEDculos recientes"),this.loading.set(!1)}}),this.wpApi.getMostReadPosts(4).subscribe({next:e=>{this.trendingPosts.set(e)},error:e=>{console.error("Error loading most read posts:",e),this.wpApi.getPosts(1,4).subscribe({next:n=>{this.trendingPosts.set(n.data)}})}})}loadMorePosts(){if(this.loadingMore()||!this.hasMorePosts())return;this.loadingMore.set(!0);let o=this.currentPage()+1,e=this.selectedCategoryId();this.wpApi.getPosts(o,this.postsPerPage,e||void 0).subscribe({next:n=>{this.recentPosts.update(u=>[...u,...n.data]),this.currentPage.set(o),this.hasMorePosts.set(o<n.totalPages),this.loadingMore.set(!1)},error:n=>{console.error("Error loading more posts:",n),this.loadingMore.set(!1)}})}onCategorySelected(o){this.selectedCategoryId.set(o),this.currentPage.set(1),this.recentPosts.set([]),this.loading.set(!0),this.wpApi.getPosts(1,this.postsPerPage,o||void 0).subscribe({next:e=>{this.recentPosts.set(e.data),this.totalPages.set(e.totalPages),this.hasMorePosts.set(1<e.totalPages),this.loading.set(!1)},error:e=>{console.error("Error loading filtered posts:",e),this.error.set("Error al cargar los art\xEDculos"),this.loading.set(!1)}})}trackByPostId(o,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-home"]],decls:33,vars:7,consts:[[1,"py-0"],[1,"w-full"],[1,"relative","w-full","mb-12"],[3,"post","featured"],["type","post-featured"],[1,"bg-red-100","dark:bg-red-900","border","border-red-400","dark:border-red-700","text-red-700","dark:text-red-200","px-4","py-3","rounded","mb-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-4","gap-8"],[1,"col-span-1","md:col-span-2","lg:col-span-3"],[1,"text-sm","font-mono","uppercase","tracking-widest","pb-2","mb-8",2,"color","var(--text-primary)","border-bottom","2px solid var(--accent-blue)"],[3,"categorySelected"],["type","post-list"],[1,"space-y-16"],[1,"text-center","py-12",2,"color","var(--text-secondary)"],[1,"mt-12","mb-20","text-center"],[1,"col-span-1","md:col-span-1","lg:col-span-1"],[3,"post"],[1,"inline-flex","items-center","px-8","py-3","text-sm","font-medium","rounded-full","transition-all","duration-300","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed",2,"background-color","var(--accent-blue)","color","white","box-shadow","0 4px 12px rgba(0, 119, 255, 0.2)",3,"disabled"],[1,"text-sm",2,"color","var(--text-tertiary)"],[1,"inline-flex","items-center","px-8","py-3","text-sm","font-medium","rounded-full","transition-all","duration-300","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed",2,"background-color","var(--accent-blue)","color","white","box-shadow","0 4px 12px rgba(0, 119, 255, 0.2)",3,"click","disabled"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[3,"posts"],[1,"space-y-4"],[1,"h-32","bg-gray-200","dark:bg-gray-700","animate-pulse","rounded"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-12"],[1,"h-64","bg-gray-200","dark:bg-gray-700","animate-pulse","rounded-lg"],[1,"py-12"],[1,"h-48","bg-gray-200","dark:bg-gray-700","animate-pulse","rounded-lg"]],template:function(e,n){e&1&&(r(0,"main",0)(1,"div",1)(2,"div",2),d(3,J,1,2,"app-post-card",3)(4,K,1,0,"app-skeleton-loader",4),i(),d(5,Q,2,1,"div",5),r(6,"div",6)(7,"div",7)(8,"div",8)(9,"h2",9),m(10," \xDAltimas Noticias "),i(),r(11,"app-category-filter",10),f("categorySelected",function(H){return n.onCategorySelected(H)}),i(),d(12,X,1,0,"app-skeleton-loader",11)(13,Z,3,0,"div",12)(14,ee,2,0,"div",13)(15,re,3,2,"div",14),i(),r(16,"div",15),d(17,ae,1,1)(18,se,4,0),C(19,17,R,null,18),y(0,-1),h(),i()()(),d(21,le,1,0)(22,de,2,0),C(23,21,q,null,22),y(0,-1),h(),d(25,ce,1,0)(26,pe,3,0),C(27,25,G,null,26),y(0,-1),h(),d(29,me,1,0)(30,ue,2,0),C(31,29,L,null,30),y(0,-1),h(),i()()),e&2&&(a(3),c(n.featuredPost()?3:-1),a(),c(n.loading()&&!n.featuredPost()?4:-1),a(),c(n.error()?5:-1),a(7),c(n.loading()?12:-1),a(),c(n.loading()?-1:13),a(),c(!n.loading()&&n.recentPosts().length===0?14:-1),a(),c(!n.loading()&&n.recentPosts().length>0?15:-1))},dependencies:[S,N,E,W],encapsulation:2,changeDetection:0})};export{B as HomeComponent};
